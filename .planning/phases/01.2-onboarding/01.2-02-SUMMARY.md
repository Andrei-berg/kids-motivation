---
phase: 01.2-onboarding
plan: "02"
subsystem: auth
tags: [supabase-auth, google-oauth, email-password, login, register, nextjs]

# Dependency graph
requires:
  - phase: 01.1-db-schema
    provides: lib/supabase/client.ts browser client, auth/callback route, middleware route guards
provides:
  - /login page: Google OAuth primary CTA + email/password form with forgot password
  - /register page: Google OAuth + email/password sign-up with email-confirmation success state
affects: [01.2-03, 01.2-04, 01.2-05, middleware, onboarding-wizard]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Auth pages use 'use client' + createClient() inside component (not module-level)"
    - "Google OAuth via supabase.auth.signInWithOAuth() with window.location.origin/auth/callback"
    - "Inline style approach with CSS variables (--emerald-500, --gray-*) matching existing globals.css"
    - "Auth state handling: session present -> router.push('/dashboard'), no session -> show 'check email' state"

key-files:
  created:
    - app/register/page.tsx
  modified:
    - app/login/page.tsx

key-decisions:
  - "Google G SVG icon inline (no external library) to avoid dependency overhead"
  - "Forgot password: user must fill email field first, then click link — avoids 2-step UX"
  - "Register handles both cases: email confirmation disabled (immediate session -> /dashboard) and enabled (show confirmation UI)"
  - "No NavBar on login/register — pre-auth pages are authentication gates, not app pages"
  - "Inline styles with CSS variables instead of Tailwind for easier alignment with existing globals.css custom properties"

patterns-established:
  - "Auth form pattern: centered card (max-w-sm, white bg, shadow-lg), logo top, heading, Google button, or-divider, form"
  - "Focus ring pattern: onFocus sets borderColor + boxShadow with emerald-500, onBlur resets"
  - "Loading state pattern: button disabled + lighter background color + text change ('Signing in...')"

requirements-completed: [REQ-ONB-001, REQ-AUTH-001, REQ-AUTH-002, REQ-AUTH-004]

# Metrics
duration: 4min
completed: 2026-03-01
---

# Phase 1.2 Plan 02: Auth Pages (Login + Register) Summary

**Production-quality /login and /register pages with Google OAuth primary CTA, email/password secondary form, forgot password, and email-confirmation success state — styled to match existing design system using emerald-500 CSS variables.**

## Performance

- **Duration:** ~4 min
- **Started:** 2026-03-01T20:09:11Z
- **Completed:** 2026-03-01T20:12:49Z
- **Tasks:** 3 of 3 (Task 3: human-verify checkpoint — approved)
- **Files modified:** 2

## Accomplishments
- Replaced the Phase 1.1 stub login page with a complete auth UI featuring Google OAuth, email/password form, forgot password flow, and link to /register
- Created new /register page from scratch with identical design language, sign-up logic, and email-confirmation success state
- Both pages use only existing design system (CSS variables from globals.css, no new dependencies)
- TypeScript compiles with zero errors across both pages

## Task Commits

Each task was committed atomically:

1. **Task 1: Login page with Google OAuth + email/password** - `473af80` (feat)
2. **Task 2: Register page with Google OAuth + email/password sign-up** - `92659b4` (feat)
3. **Task 3: Checkpoint — human-verify approved** - (no code commit; verification only)

**Plan metadata:** `7036f6d` (docs: complete auth pages plan)

## Files Created/Modified
- `app/login/page.tsx` - Full login page: Google OAuth button with SVG icon, email/password form, forgot password (inline recovery), error display, link to /register
- `app/register/page.tsx` - Registration page: same card layout, Google OAuth, email/password + helper text, dual success paths (immediate session or email confirmation UI), link to /login

## Decisions Made
- Google G SVG icon inlined — avoids pulling in an icon library for a single logo
- Forgot password requires email field populated first (no separate input) — consistent with common auth UX patterns
- Register page handles both Supabase configurations (email confirmation on/off) for flexibility
- No NavBar on auth pages — these are pre-auth entry points
- Used inline styles with CSS variable references instead of Tailwind for full alignment with existing globals.css custom properties (--emerald-500 etc.)

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

**External services require manual configuration.** The following Supabase/Google setup is needed for Google OAuth to work:

1. **Enable Google provider in Supabase** — Authentication > Providers > Google > Enable (requires Google Client ID and Secret)
2. **Create OAuth 2.0 credentials** — Google Cloud Console > APIs & Services > Credentials > Create OAuth 2.0 Client ID. Set redirect URI: `https://<project>.supabase.co/auth/v1/callback`
3. **Set Site URL** — Supabase > Authentication > URL Configuration > Site URL: `http://localhost:3000` (dev) / `https://kids-motivation.vercel.app` (prod)
4. **Add redirect URLs** — Add `http://localhost:3000/auth/callback` and `https://kids-motivation.vercel.app/auth/callback`

## Next Phase Readiness
- Both auth entry pages complete and wired to Supabase Auth
- Middleware already routes unauthenticated users to /login (Phase 1.1)
- Human verification passed — checkpoint approved (branding "FamilyCoins" noted as non-blocker, to be corrected later)
- Ready for Phase 1.2 Plan 03 (onboarding wizard)
- Google OAuth functional only after user completes Supabase/Google Cloud setup (see User Setup above)

---
*Phase: 01.2-onboarding*
*Completed: 2026-03-01*

## Self-Check: PASSED

- app/login/page.tsx: FOUND
- app/register/page.tsx: FOUND
- 01.2-02-SUMMARY.md: FOUND
- Commit 473af80 (Task 1): FOUND
- Commit 92659b4 (Task 2): FOUND
